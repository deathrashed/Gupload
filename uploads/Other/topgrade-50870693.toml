# Topgrade Configuration for macOS
# This configuration optimizes Topgrade for macOS while excluding system updates
# System updates should be handled through System Settings > Software Update

[misc]
# Don't ask for confirmations (useful for automated runs)
# Set to false so Topgrade will stop and ask when errors occur
assume_yes = false

# Show the reason for skipped steps
show_skipped = true

# Display the time in step titles
display_time = true

# Cleanup temporary or old files after updates
cleanup = true

# Send a notification at the end of a run
skip_notify = false

# Run `sudo -v` to cache credentials at the start
# This avoids blocking password prompts during unattended runs
pre_sudo = true

# Disable system updates (handle through System Settings instead)
# This prevents Topgrade from running `softwareupdate` commands
disable = ["system"]

# Don't ignore failures - stop and ask what to do
# This allows Topgrade to suggest fixes when errors occur
# You can choose: (y)es to retry, (N)o to skip, (s)hell to fix manually, (q)uit to exit
ignore_failures = []


# Commands to run before anything
[pre_commands]
# Example: Backup before updates
# "Backup Config" = "cp -r ~/.config ~/.config.backup.$(date +%Y%m%d)"


# Commands to run after everything
[post_commands]
# Clean up after updates
"Post-update cleanup" = "brew cleanup 2>/dev/null || true"


# Custom commands
[commands]
# Fix common Homebrew issues before updates
"Check Homebrew health" = "brew doctor 2>&1 | head -20 || echo 'Homebrew is healthy'"


# Homebrew configuration
[brew]
# Upgrade formulae built from HEAD branch
fetch_head = false

# Execute `brew autoremove` after updating
autoremove = true

# For BrewCask: use --greedy to include auto-updating apps
# Set to false to only update apps that don't auto-update themselves
greedy_cask = false

# For BrewCask: use --greedy-latest for latest versions
greedy_latest = false

# For BrewCask: use --greedy-auto-updates for auto-updating apps
# Set to false to skip apps that have auto-updates enabled
greedy_auto_updates = false


# Python package management
[python]
# Enable pip-review (shows outdated packages)
enable_pip_review = false

# Enable pip-review for local packages
enable_pip_review_local = false

# Enable pipupgrade (upgrades all packages)
enable_pipupgrade = false

# pipupgrade arguments
# pipupgrade_arguments = "-y -u --pip-path pip"


# Composer (PHP)
[composer]
# Self-update Composer
self_update = true


# npm configuration
[npm]
# Use sudo if NPM directory isn't owned by current user
use_sudo = false


# Yarn configuration
[yarn]
# Run `yarn global upgrade` with sudo
use_sudo = false


# Git repositories
[git]
# How many repos to pull/fetch in parallel
max_concurrency = 5

# Additional git repositories to pull/fetch
repos = [

    "~/.config/zsh"
]

# Set to false to skip pulling predefined git repos
pull_predefined = true

# Arguments to pass Git when pulling/fetching
arguments = "--rebase --autostash"

# Whether to perform `git fetch` instead of `git pull`
fetch_only = false


# VS Code extensions
[vscode]
# Profile to update extensions for (leave empty for default)
profile = ""


# Rust toolchain
[rustup]
# Update only these channels (empty = all channels)
channels = ["stable"]


# Firmware updates
[firmware]
# Offer to update firmware (macOS firmware updates)
# Set to false to only check and display available updates
upgrade = false


# Containers (Docker/Podman)
[containers]
# Specify containers to ignore while updating (wildcards supported)
# ignored_containers = ["ghcr.io/rancher-sandbox/rancher-desktop/rdx-proxy:latest"]

# Runtime to use (docker or podman)
runtime = "docker"

# Run 'docker system prune' to clean up unused containers
system_prune = false

# Use sudo for updating containers
use_sudo = false


# Flatpak (if installed)
[flatpak]
# Use sudo for system-wide Flatpak updates
use_sudo = false
